(this["webpackJsonpmern-client"]=this["webpackJsonpmern-client"]||[]).push([[0],{159:function(e,t,a){},198:function(e,t,a){},204:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(73),s=a.n(o),r=a(26),i=a(20),c=a(39),l=a(17),u=a(164),d=a(165),p=a(145),m=a.n(p),b=new(function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"getProfile",value:function(){return m()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return m()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),j=(a(155),a(238)),h=(a(198),a(4));var x=function(){console.log("NAV TABS!!!!!!!");var e=Object(n.useState)("home"),t=Object(r.a)(e,2),a=t[0],o=t[1],s=window.location.pathname,i=("/"===s||s.substr(1),function(e,t){var a=t.name;return o(a)});return Object(h.jsx)("div",{className:"nav-bar-home",style:{borderBottomStyle:"outset"},children:Object(h.jsxs)(j.a,{pointing:!0,secondary:!0,children:[Object(h.jsx)(j.a.Item,{className:"home",style:{color:"#fdd05a",fontSize:"3vw",textShadow:"-1px 1px 2px #000",fontFamily:"sans-serif"},name:"home",active:"home"===a,onClick:i,as:c.b,to:"/"}),Object(h.jsxs)(j.a.Menu,{position:"right",children:[Object(h.jsx)(j.a.Item,{className:"login",style:{color:"#fdd05a",fontSize:"3vw",textShadow:"-1px 1px 2px #000",fontFamily:"sans-serif"},name:"login",active:"login"===a,onClick:i,as:c.b,to:"/login"}),Object(h.jsx)(j.a.Item,{className:"signup",style:{color:"#fdd05a",fontSize:"3vw",textShadow:"-1px 1px 2px #000",fontFamily:"sans-serif"},name:"signup",active:"signup"===a,onClick:i,as:c.b,to:"/signup"})]})]})})},f=a(242);a(204);var O,g,v,w=function(){return Object(h.jsxs)("div",{style:{margin:"0",maxHeight:"100%",backgroundColor:"#1c2529",width:"100%"},className:"HomePage",children:[Object(h.jsx)(f.a,{style:{maxWidth:"100%"},children:Object(h.jsx)("img",{style:{borderBottomStyle:"outset",margin:"0 0 -5 0",maxWidth:"100%",maxHeight:"100%"},className:"display-3",src:"https://i.imgur.com/hkVYvd3.jpg"})}),Object(h.jsx)("h1",{className:"about",style:{textShadow:"-1px 1px 2px #000",margin:"-5% 35% 0 35%",fontFamily:"sans-serif",color:"#fdd05a",fontSize:"10vw"},children:"ABOUT"}),Object(h.jsx)("p",{style:{textShadow:"-5px 1px 2px #000",fontFamily:"sans-serif",color:"#fdd05a",textAlign:"center",fontSize:"25px",margin:"5% 15% 10% 15%"},children:"How far away take root and flourish preserve and cherish that pale blue dot finite but unbounded are creatures of the cosmos realm of the galaxies. Sea of Tranquility with pretty stories for which there's little good evidence with pretty stories for which there's little good evidence globular star cluster stirred by starlight concept of the number one? Paroxysm of global death hearts of the stars at the edge of forever hearts of the stars inconspicuous motes of rock and gas with pretty stories for which there's little good evidence and billions upon billions upon billions upon billions upon billions upon billions upon billions."})]})},y=a(54),S=a.n(y),k=a(91),I=a(37),C=a(237),N=a(243),P=a(244),E=a(140),V=a(240),T=Object(V.a)(O||(O=Object(E.a)(["\nmutation login($email: String!, $password: String!) {\n  login(email: $email, password: $password) {\n    token\n    user {\n      _id\n    username\n    \n    }\n  }\n}\n"]))),$=Object(V.a)(g||(g=Object(E.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n        email\n       \n      }\n    }\n  }\n"]))),z=Object(V.a)(v||(v=Object(E.a)(["\n  mutation addPost($postInput: PostInput! ) {\n  addPost(postInput: $postInput)\n       {\n\n        _id\n            username\n            email\n            post{\n\n           \n              _id\n             username\n              instrument\n              description\n                genre\n                image\n                title\n           }\n      \n          } }\n  "])));a(159);var F=function(e){var t,a=Object(n.useState)({email:"",password:""}),o=Object(r.a)(a,2),s=o[0],c=o[1],l=Object(P.a)(T,{update:function(t,a){console.log(a),e.history.push("/dashboard")},variable:Object(i.a)({},s)}),u=Object(r.a)(l,2),d=u[0],p=u[1].loading,m=function(e){var t=e.target,a=t.name,n=t.value;c(Object(i.a)(Object(i.a)({},s),{},Object(I.a)({},a,n)))},j=function(){var e=Object(k.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.prev=3,e.next=6,d({variables:Object(i.a)({},s)});case 6:a=e.sent,n=a.data,console.log("data!! from mutation attempt",n),b.login(n.login.token),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.log("WE HAVE ERRR from mutation thing",e.t0),console.error(e.t0);case 16:c({email:"",password:""});case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"form-container",children:Object(h.jsxs)(C.a,(t={onSubmit:j,noValidate:!0},Object(I.a)(t,"noValidate",!0),Object(I.a)(t,"className",p?"loading":""),Object(I.a)(t,"children",[Object(h.jsx)("h1",{children:"Login"}),Object(h.jsx)(C.a.Input,{label:"Email",placholder:"Your email address..",name:"email",type:"email",value:s.email,onChange:m}),Object(h.jsx)(C.a.Input,{label:"Password",placholder:"Your password..",name:"password",type:"password",value:s.password,onChange:m}),Object(h.jsx)(N.a,{disabled:!(s.email&&s.password),type:"submit",primary:!0,variant:"success",children:"Submit"})]),t))})};var D=function(e){var t=Object(n.useState)({}),a=Object(r.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)({username:"",email:"",password:""}),l=Object(r.a)(c,2),u=l[0],d=l[1],p=Object(P.a)($,{update:function(t,a){console.log(a),e.history.push("/dashboard")},onError:function(e){s(e.graphQLErrors[0].extensions.exception.errors),console.log(e.graphQLErrors[0].extensions.exception.errors)},variable:Object(i.a)({},u)}),m=Object(r.a)(p,2),j=m[0],x=m[1].loading,f=function(e){var t=e.target,a=t.name,n=t.value;d(Object(i.a)(Object(i.a)({},u),{},Object(I.a)({},a,n)))},O=function(){var e=Object(k.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.prev=3,e.next=6,j({variables:Object(i.a)({},u)});case 6:a=e.sent,n=a.data,console.log("data!! from mutation attempt",n),b.login(n.addUser.token),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.log("WE HAVE ERRR from mutation thing",e.t0),console.error(e.t0);case 16:d({username:"",email:"",password:""});case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"form-container",children:[Object(h.jsxs)(C.a,{onSubmit:function(e){O(e)},className:x?"loading":"classless",children:[Object(h.jsx)("h1",{children:"Sign Up"}),Object(h.jsx)(C.a.Input,{label:"Username",placholder:"Your username..",name:"username",type:"username",value:u.username,onChange:f}),Object(h.jsx)(C.a.Input,{label:"Email",placholder:"Your email address..",name:"email",type:"email",value:u.email,onChange:f}),Object(h.jsx)(C.a.Input,{label:"Password",placholder:"Your password..",name:"password",type:"password",value:u.password,onChange:f}),Object(h.jsx)(N.a,{disabled:!(u.username&&u.email&&u.password),type:"submit",primary:!0,variant:"success",children:"Submit"})]}),Object.keys(o).length>0&&Object(h.jsx)("div",{className:"ui error message",children:Object(h.jsx)("ul",{className:"List",children:Object.values(o).map((function(e){return Object(h.jsx)("li",{children:e},e)}))})})]})};var A=function(e){console.log("NAV HOME!!!");var t=Object(n.useState)("home"),a=Object(r.a)(t,2),o=a[0],s=a[1],i=window.location.pathname,l=("/"===i||i.substr(1),function(e,t){var a=t.name;return s(a)});return e.loggedIn,Object(h.jsx)("div",{style:{backgroundColor:"#1c2529"},children:Object(h.jsxs)(j.a,{pointing:!0,secondary:!0,children:[Object(h.jsx)(j.a.Item,{className:"login",style:{color:"#fdd05a",fontSize:"2vw",textShadow:"-1px 1px 2px #000",fontFamily:"sans-serif"},name:"logout",active:"logout"===o,onClick:b.logout,as:c.b,to:"/"}),Object(h.jsx)(j.a.Item,{style:{color:"#fdd05a",fontSize:"2vw",textShadow:"-1px 1px 2px #000",fontFamily:"sans-serif"},name:"Dashboard",active:"dashboard"===o,onClick:l,as:c.b,to:"/dashboard"}),Object(h.jsxs)(j.a.Menu,{position:"right",children:[Object(h.jsx)(j.a.Item,{style:{color:"#fdd05a",fontSize:"2vw",textShadow:"-1px 1px 2px #000",fontFamily:"sans-serif"},name:"View All Posts",active:"viewallposts"===o,onClick:l,as:c.b,to:"/viewallposts"}),Object(h.jsx)(j.a.Item,{style:{color:"#fdd05a",fontSize:"2vw",textShadow:"-1px 1px 2px #000",fontFamily:"sans-serif"},name:"View My Posts",active:"viewmyposts"===o,onClick:l,as:c.b,to:"/viewmyposts"}),Object(h.jsx)(j.a.Item,{style:{color:"#fdd05a",fontSize:"2vw",textShadow:"-1px 1px 2px #000",fontFamily:"sans-serif"},name:"Create Post",active:"createpost"===o,onClick:l,as:c.b,to:"/createpost"})]})]})})};var U=function(){return Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:"Dashboard"})})};var _=function(){return Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:"View All Posts"})})};var H=function(){return Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:"View My Posts"})})};a(213);var B=function(){var e=Object(n.useState)({username:"",instrument:"",genre:"",title:"",description:""}),t=Object(r.a)(e,2),a=t[0],o=t[1],s=Object(P.a)(z),c=Object(r.a)(s,2),l=c[0],u=c[1].loading,d=function(){var e=Object(k.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{n=l({variables:Object(i.a)({},a)}),n.data,window.location.reload()}catch(o){console.error(o)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=e.target,n=t.name,s=t.value;("username"===n&&s.length<=280||"username"!==n)&&o(Object(i.a)(Object(i.a)({},a),{},Object(I.a)({},n,s)))};return Object(h.jsx)("div",{className:"form-container",children:Object(h.jsx)(C.a,{onSubmit:d,noValidate:!0,className:u?"loading":"",children:Object(h.jsxs)(C.a.Field,{children:[Object(h.jsx)("h1",{children:"Create a Post:"}),Object(h.jsx)(C.a.Input,{label:"Username",placholder:"Username..",name:"username",value:a.username,onChange:p}),Object(h.jsx)(C.a.Input,{label:"Instrument",placholder:"Instrument..",name:"instrument",value:a.instrument,onChange:p}),Object(h.jsx)(C.a.Input,{label:"Genre",placholder:"Genre..",name:"genre",value:a.genre,onChange:p}),Object(h.jsx)(C.a.Input,{label:"Title",placholder:"Title..",name:"title",value:a.title,onChange:p}),Object(h.jsx)(C.a.Input,{className:"discription-form",label:"Description",placholder:"Description..",name:"description",value:a.description,onChange:p}),Object(h.jsx)(N.a,{className:"button-form",disabled:!Object(i.a)({},a),type:"submit",variant:"success",children:"Save Post"})]})})})},R=a(175),Y=a(239),M=a(241),L=a(236),W=a(174),q=Object(R.a)({uri:"/graphql"}),G=Object(W.a)((function(e,t){var a=t.headers,n=localStorage.getItem("id_token");return{headers:Object(i.a)(Object(i.a)({},a),{},{authorization:n?"Bearer ".concat(n):""})}})),J=new Y.a({link:G.concat(q),cache:new M.a});var Q=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){var e=b.loggedIn();o(e)}),[]),Object(h.jsx)(L.a,{client:J,children:Object(h.jsxs)(c.a,{children:[a?Object(h.jsx)(A,{}):Object(h.jsx)(x,{}),Object(h.jsxs)(l.c,{children:[Object(h.jsx)(l.a,{exact:!0,path:"/",component:w}),Object(h.jsx)(l.a,{exact:!0,path:"/dashboard",component:U}),Object(h.jsx)(l.a,{exact:!0,path:"/viewallposts",component:_}),Object(h.jsx)(l.a,{exact:!0,path:"/viewmyposts",component:H}),Object(h.jsx)(l.a,{exact:!0,path:"/createpost",component:B}),Object(h.jsx)(l.a,{exact:!0,path:"/login",component:F}),Object(h.jsx)(l.a,{exact:!0,path:"/signup",component:D})]})]})})};s.a.render(Object(h.jsx)(Q,{}),document.getElementById("root"))}},[[214,1,2]]]);
//# sourceMappingURL=main.0b8b94c7.chunk.js.map